<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'>

<beans>

	<bean id="webscript.owsi.remote" parent="webscript" abstract="true"
			class="fr.openwide.alfresco.repo.remote.framework.web.script.AbstractRemoteWebScript">
		<property name="transactionService" ref="transactionService" />
		<property name="maxRetries" value="${server.transaction.max-retries}"/>
		<property name="encryptTempFiles" value="${webscripts.encryptTempFiles}" />
		<property name="tempDirectoryName" value="${webscripts.tempDirectoryName}" />
		<property name="memoryThreshold" value="${webscripts.memoryThreshold}" />
		<property name="maxContentSize" value="${webscripts.setMaxContentSize}" />
	</bean>

	<bean id="owsi.service.conversionService" class="fr.openwide.alfresco.repo.remote.conversion.service.impl.ConversionServiceImpl">
		<property name="namespacePrefixResolver" ref="NamespaceService" />
		<property name="mimetypeService" ref="MimetypeService" />
	</bean>
	
	<!-- Utilitaires -->
	
	<bean id="owsi.service.resetModuleVersionService" class="fr.openwide.alfresco.repo.core.resetModuleVersion.service.impl.ResetModuleVersionServiceImpl">
		<property name="modules" value="${owsi.reset-module-version.modules}" />
		<property name="registryService" ref="RegistryService" />
	</bean>

	<bean id="owsi.service.resetUserPasswordService" class="fr.openwide.alfresco.repo.core.resetUserPassword.service.impl.ResetUserPasswordServiceImpl">
		<property name="users" value="${owsi.reset-user-password.users}" />
		<property name="authenticationService" ref="AuthenticationService" />
	</bean>

	<bean id="owsi.service.chaosMonkey" class="fr.openwide.alfresco.repo.core.chaosmonkey.service.impl.ChaosMonkeyImpl">
		<property name="failOccurance" value="${owsi.chaosmonkey.failOccurance}" />
		<property name="seed" value="${owsi.chaosmonkey.seed}" />
		<property name="exception" value="${owsi.chaosmonkey.exception}" />
		<property name="maxRetries" value="${server.transaction.max-retries}"/>
	</bean>

	<!-- Services with model -->

	<bean id="owsi.service.nodeModelRepositoryService" class="fr.openwide.alfresco.repo.dictionary.node.service.impl.NodeModelRepositoryServiceImpl">
		<property name="repositoryHelper" ref="repositoryHelper" />
		<property name="singletonCache" ref="immutableSingletonCache" />
		<property name="dataDictionaryChildName"><value>${spaces.dictionary.childname}</value></property>
	</bean>

	<bean id="owsi.service.permissionService" class="fr.openwide.alfresco.repo.dictionary.permission.service.impl.PermissionRepositoryServiceImpl">
		<property name="permissionService" ref="PermissionService"/>
		<property name="authorityService" ref="AuthorityService"/>
		<property name="conversionService" ref="owsi.service.conversionService" />
		<property name="dataSource" ref="dataSource"/>
		<property name="nodeSearchModelService" ref="owsi.service.nodeSearchModelService"/>
		<property name="policyRepositoryService" ref="owsi.service.policyService"/>
		<property name="preferenceService" ref="PreferenceService"/>
		<property name="personService" ref="PersonService"/>
	</bean>

	<bean id="owsi.service.nodeSearchModelService" class="fr.openwide.alfresco.repo.dictionary.search.service.impl.NodeSearchModelRepositoryServiceImpl"/>

	<bean id="owsi.service.workflowContextService" class="fr.openwide.alfresco.repo.dictionary.workflow.service.impl.WorkflowContextServiceImpl"/>

	<bean id="owsi.service.policyService" class="fr.openwide.alfresco.repo.dictionary.policy.service.impl.PolicyRepositoryServiceImpl">
		<property name="policyComponent" ref="policyComponent" />
		<property name="policyFilter" ref="policyBehaviourFilter" />
		<property name="conversionService" ref="owsi.service.conversionService" />
	</bean>
	
	<bean id="owsi.service.uniqueNameRepositoryService" class="fr.openwide.alfresco.repo.dictionary.node.service.impl.UniqueNameRepositoryServiceImpl"></bean>

</beans>
